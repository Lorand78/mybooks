import{u as fe,r as i,o as ge,y as z,a as g,b as y,d as r,e as ye,s as xe,j as x,S as be,k as h,m as n,l as a,z as te,q as Z,A as ke,x as ee,V as Te,B as he}from"./index-53315596.js";import{u as Ne,_ as O}from"./useManagementUtils-5ae4354b.js";var l={},d,v;function R(){throw new Error("setTimeout has not been defined")}function S(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?d=setTimeout:d=R}catch{d=R}try{typeof clearTimeout=="function"?v=clearTimeout:v=S}catch{v=S}})();function ae(t){if(d===setTimeout)return setTimeout(t,0);if((d===R||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch{try{return d.call(null,t,0)}catch{return d.call(this,t,0)}}}function we(t){if(v===clearTimeout)return clearTimeout(t);if((v===S||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(t);try{return v(t)}catch{try{return v.call(null,t)}catch{return v.call(this,t)}}}var m=[],N=!1,b,I=-1;function De(){!N||!b||(N=!1,b.length?m=b.concat(m):I=-1,m.length&&le())}function le(){if(!N){var t=ae(De);N=!0;for(var s=m.length;s;){for(b=m,m=[];++I<s;)b&&b[I].run();I=-1,s=m.length}b=null,N=!1,we(t)}}l.nextTick=function(t){var s=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)s[c-1]=arguments[c];m.push(new oe(t,s)),m.length===1&&!N&&ae(le)};function oe(t,s){this.fun=t,this.array=s}oe.prototype.run=function(){this.fun.apply(null,this.array)};l.title="browser";l.browser=!0;l.env={};l.argv=[];l.version="";l.versions={};function f(){}l.on=f;l.addListener=f;l.once=f;l.off=f;l.removeListener=f;l.removeAllListeners=f;l.emit=f;l.prependListener=f;l.prependOnceListener=f;l.listeners=function(t){return[]};l.binding=function(t){throw new Error("process.binding is not supported")};l.cwd=function(){return"/"};l.chdir=function(t){throw new Error("process.chdir is not supported")};l.umask=function(){return 0};const Ie=["src","title"],Ce=te("h1",{style:{color:"red","font-weight":"bold","text-align":"center"}}," Nincs bejelentkezve! ",-1),Be={__name:"Management",setup(t){console.log("Karbantartás!!!");const s=fe(),c=i(null),C=s.currentRoute.value.params.type;var $=C=="AT";const V=i(!1),L=i(""),ne=i(null),re=i(""),ie=i(""),F=i(null),E=i(null),j=i(null),p=i(null),A=i(!1),B=i(!1),K=i(!1),Y=i(null),X=i("green"),{titlevalue:k,keyvalue:T,keyID:Ve,newtitle:Q,modifytitle:se,deletetitle:G,setMetaByCat:ue,setItem:ce}=Ne(),H=async u=>{V.value=!0;try{const e=await ye.get("/api/data/"+u+"/-1/"+xe.value);console.log("response: ",e.data),c.value=e.data,console.log("data: ",c.value)}catch(e){console.log("error: ",e.response)}V.value=!1};ge(async()=>{console.log("onMounted, cat: ",s.currentRoute.value.params.type),z.value==!0&&(ue(s.currentRoute.value.params.type),await H(C)),console.log("onMounted után")});const w=i([]);C==="AT"?w.value=[{title:k,key:T},{title:"Nemzetiség",key:"NN_COUNTRYCODE"},{title:"Műveletek",key:"actions",sortable:!1}]:w.value=[{title:k,key:T},{title:"Műveletek",key:"actions",sortable:!1}],console.log("head: ",w);async function pe(){const u=he,e=u.utils.book_new(),_=u.utils.json_to_sheet(c.value);u.utils.book_append_sheet(e,_,ie.value),u.writeFile(e,re.value)}function de(){window.scrollTo(0,0)}function J(u,e){p.value=u,console.log("selectedItem: ",p.value),ke(()=>{e=="upd"?A.value=!0:B.value=!0})}async function M(u,e){await ce({action:u,myDialog:e,selectedItem:p,cat:s.currentRoute.value.params.type,fetchData:H,snackbarState:{color:X,message:Y,active:K}})}return(u,e)=>{const _=g("v-col"),ve=g("v-text-field"),U=g("v-btn"),D=g("v-row"),q=g("v-card"),P=g("v-icon"),W=g("v-tooltip"),_e=g("v-container");return x(),y(_e,{fluid:""},{default:r(()=>[K.value?(x(),y(be,{key:0,p_title:Y.value,p_color:X.value},null,8,["p_title","p_color"])):h("",!0),n(z)?(x(),y(D,{key:1},{default:r(()=>[a(_,{cols:"2"}),a(_,{cols:"8"},{default:r(()=>[p.value?(x(),y(O,{key:0,p_visible:A.value,"onUpdate:p_visible":e[0]||(e[0]=o=>A.value=o),ref_key:"myModifyDialog",ref:E,p_defvalue:p.value?p.value[n(T)]:"",p_type:"brown",p_headerTitle:n(se),p_colpadding:"padding: 0px 7px 0px 0px",p_color:"black",p_variant:"tonal",p_textFieldLabel:n(k),p_required:" true ",p_action:"upd",onSave:e[1]||(e[1]=o=>M("upd",E.value)),p_autocomplete:n($),p_acDefaultValue:p.value?p.value[ne.value]:"",p_acLabel:"Nemzetiség",p_acItems:n(ee),p_acKey:"NN_ID",p_acTitle:"NN_NATIONALITY",p_acValue:"NN_ID"},null,8,["p_visible","p_defvalue","p_headerTitle","p_textFieldLabel","p_autocomplete","p_acDefaultValue","p_acItems"])):h("",!0),p.value?(x(),y(O,{key:1,p_visible:B.value,"onUpdate:p_visible":e[2]||(e[2]=o=>B.value=o),ref_key:"myDeleteDialog",ref:j,p_defvalue:p.value?p.value[n(T)]:"",p_type:"brown",p_headerTitle:n(G),p_colpadding:"padding: 0px 7px 0px 0px",p_color:"black",p_variant:"tonal",p_textFieldLabel:n(G),onClose:e[3]||(e[3]=o=>M("del",j.value)),p_required:" true ",p_disabled:" true ",p_readonly:" true ",p_okBtnName:"Igen",p_cancelBtnName:"Nem"},null,8,["p_visible","p_defvalue","p_headerTitle","p_textFieldLabel"])):h("",!0),a(q,{rounded:"lg",style:{padding:"15px","background-color":"antiquewhite"}},{default:r(()=>[c.value?(x(),y(n(Te),{key:0,style:{"background-color":"antiquewhite"},modelValue:u.selectedRow,"onUpdate:modelValue":e[8]||(e[8]=o=>u.selectedRow=o),density:"compact",headers:w.value,items:c.value,"item-value":n(T),"item-key":n(T),class:"elevation-1",search:L.value,hover:"true","multi-sort":"true","items-per-page-text":n(k)+" oldalanként","select-strategy":"page","no-data-text":"Nincs a keresésnek megfelelő "+n(k).toLowerCase()+"...",loading:V.value,"loading-text":"Betöltés... Kérem várjon","show-current-page":"true","page-text":"","onUpdate:page":e[9]||(e[9]=o=>de())},{top:r(()=>[a(q,{rounded:"lg",elevation:"6",color:"black",variant:"tonal",style:{margin:"10px 10px 10px 10px"}},{default:r(()=>[a(D,null,{default:r(()=>[a(_,{cols:"6"},{default:r(()=>[a(ve,{modelValue:L.value,"onUpdate:modelValue":e[4]||(e[4]=o=>L.value=o),label:"Keresés",class:"mx-auto",clearable:"","append-inner-icon":"fas fa-magnifying-glass",style:{padding:"10px 10px 0px 10px","margin-top":"10px"},rounded:"lg",elevation:"10"},null,8,["modelValue"])]),_:1}),a(_,{cols:"3"}),a(_,{cols:"2"},{default:r(()=>[a(O,{ref_key:"myNewDialog",ref:F,p_defvalue:"",p_btnName:n(Q),p_type:"brown",p_prependicon:"fa fa-square-plus",p_headerTitle:n(Q),p_colpadding:"padding: 30px 0px 0px 0px",p_color:"black",p_size:"default",p_rounded:"lg",p_elevation:"10",p_variant:"tonal",p_textFieldLabel:n(k),onSave:e[5]||(e[5]=o=>M("add",F.value)),p_required:" true ",p_tooltipText:"Új",p_tooltipLocation:"start",p_autocomplete:n($),p_acDefaultValue:"",p_acLabel:"Nemzetiség",p_acItems:n(ee),p_acKey:"NN_ID",p_acTitle:"NN_NATIONALITY",p_acValue:"NN_ID"},null,8,["p_btnName","p_headerTitle","p_textFieldLabel","p_autocomplete","p_acItems"])]),_:1}),a(_,{cols:"1"},{default:r(()=>[a(U,{modelValue:u.exportXlsxBtn,"onUpdate:modelValue":e[6]||(e[6]=o=>u.exportXlsxBtn=o),style:{margin:"30px 0px 0px 0px"},"prepend-icon":"mdi-export",rounded:"lg",elevation:"10",variant:"tonal",onClick:e[7]||(e[7]=o=>pe())},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),"item.NN_COUNTRYCODE":r(({item:o})=>[te("img",{src:`https://flagcdn.com/w40/${o.NN_COUNTRYCODE||"un"}.png`,alt:"zászló",title:o.NN_NATIONALITY||"Nincs megadva",style:{"vertical-align":"middle"}},null,8,Ie)]),"item.actions":r(({item:o})=>[a(D,{dense:"","no-gutters":"",align:"center"},{default:r(()=>[a(U,{icon:"",style:{"margin-right":"10px"},variant:"tonal",size:"x-small",color:"black",onClick:me=>J(o,"upd")},{default:r(()=>[a(P,null,{default:r(()=>[Z("fa fa-pen-to-square")]),_:1}),a(W,{activator:"parent",text:"Módosítás",location:"left"})]),_:2},1032,["onClick"]),a(U,{icon:"",variant:"tonal",size:"x-small",color:"black",onClick:me=>J(o,"del")},{default:r(()=>[a(P,null,{default:r(()=>[Z("fa fa-trash")]),_:1}),a(W,{activator:"parent",text:"Törlés",location:"right"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["modelValue","headers","items","item-value","item-key","search","items-per-page-text","no-data-text","loading"])):h("",!0)]),_:1})]),_:1}),a(_,{cols:"2"})]),_:1})):h("",!0),a(D,{align:"center",justify:"center"},{default:r(()=>[n(z)?h("",!0):(x(),y(q,{key:0,rounded:"lg",elevation:"16",color:"#e3d19f",width:"600",px:""},{default:r(()=>[Ce]),_:1}))]),_:1})]),_:1})}}};export{Be as default};
