import{u as fe,r as i,o as ge,y as O,a as g,b as y,d as l,e as ye,s as xe,j as x,S as be,k as h,m as r,l as a,q as R,z as ee,A as ke,v as Te,x as Z,V as he,B as Ne}from"./index-ff1746be.js";import{u as we,_ as S}from"./useManagementUtils-69c44db8.js";var o={},d,v;function F(){throw new Error("setTimeout has not been defined")}function $(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?d=setTimeout:d=F}catch{d=F}try{typeof clearTimeout=="function"?v=clearTimeout:v=$}catch{v=$}})();function te(t){if(d===setTimeout)return setTimeout(t,0);if((d===F||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch{try{return d.call(null,t,0)}catch{return d.call(this,t,0)}}}function De(t){if(v===clearTimeout)return clearTimeout(t);if((v===$||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(t);try{return v(t)}catch{try{return v.call(null,t)}catch{return v.call(this,t)}}}var m=[],N=!1,b,I=-1;function Ie(){!N||!b||(N=!1,b.length?m=b.concat(m):I=-1,m.length&&ae())}function ae(){if(!N){var t=te(Ie);N=!0;for(var s=m.length;s;){for(b=m,m=[];++I<s;)b&&b[I].run();I=-1,s=m.length}b=null,N=!1,De(t)}}o.nextTick=function(t){var s=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)s[c-1]=arguments[c];m.push(new le(t,s)),m.length===1&&!N&&te(ae)};function le(t,s){this.fun=t,this.array=s}le.prototype.run=function(){this.fun.apply(null,this.array)};o.title="browser";o.browser=!0;o.env={};o.argv=[];o.version="";o.versions={};function f(){}o.on=f;o.addListener=f;o.once=f;o.off=f;o.removeListener=f;o.removeAllListeners=f;o.emit=f;o.prependListener=f;o.prependOnceListener=f;o.listeners=function(t){return[]};o.binding=function(t){throw new Error("process.binding is not supported")};o.cwd=function(){return"/"};o.chdir=function(t){throw new Error("process.chdir is not supported")};o.umask=function(){return 0};const Ce=["src","title"],Ve=ee("h1",{style:{color:"red","font-weight":"bold","text-align":"center"}}," Nincs bejelentkezve! ",-1),Me={__name:"Management",setup(t){console.log("Karbantartás!!!");const s=fe(),c=i(null),C=s.currentRoute.value.params.type;var E=C=="AT";const V=i(!1),L=i(""),oe=i(null),ne=i(""),re=i(""),j=i(null),K=i(null),Y=i(null),p=i(null),A=i(!1),B=i(!1),X=i(!1),Q=i(null),G=i("green"),{titlevalue:k,keyvalue:T,keyID:Le,newtitle:H,modifytitle:ie,deletetitle:J,setMetaByCat:se,setItem:ue}=we(),ce=async u=>{V.value=!0;try{const e=await ye.get("/api/data/"+u+"/-1/"+xe.value);console.log("response: ",e.data),c.value=e.data,console.log("data: ",c.value)}catch(e){console.log("error: ",e.response)}V.value=!1};ge(async()=>{console.log("onMounted, cat: ",s.currentRoute.value.params.type),O.value==!0&&(se(s.currentRoute.value.params.type),await ce(C)),console.log("onMounted után")});const w=i([]);C==="AT"?w.value=[{title:k,key:T},{title:"Nemzetiség",key:"NN_COUNTRYCODE"},{title:"Műveletek",key:"actions",sortable:!1}]:w.value=[{title:k,key:T},{title:"Műveletek",key:"actions",sortable:!1}],console.log("head: ",w);async function pe(){const u=Ne,e=u.utils.book_new(),_=u.utils.json_to_sheet(c.value);u.utils.book_append_sheet(e,_,re.value),u.writeFile(e,ne.value)}function de(){window.scrollTo(0,0)}function P(u,e){p.value=u,console.log("selectedItem: ",p.value),ke(()=>{e=="upd"?A.value=!0:B.value=!0})}async function M(u,e){await ue({action:u,myDialog:e,selectedItem:p,cat:s.currentRoute.value.params.type,fetchData:Te,snackbarState:{color:G,message:Q,active:X}})}return(u,e)=>{const _=g("v-col"),ve=g("v-text-field"),U=g("v-icon"),q=g("v-btn"),D=g("v-row"),z=g("v-card"),W=g("v-tooltip"),_e=g("v-container");return x(),y(_e,{fluid:""},{default:l(()=>[X.value?(x(),y(be,{key:0,p_title:Q.value,p_color:G.value},null,8,["p_title","p_color"])):h("",!0),r(O)?(x(),y(D,{key:1},{default:l(()=>[a(_,{cols:"2"}),a(_,{cols:"8"},{default:l(()=>[p.value?(x(),y(S,{key:0,p_visible:A.value,"onUpdate:p_visible":e[0]||(e[0]=n=>A.value=n),ref_key:"myModifyDialog",ref:K,p_defvalue:p.value?p.value[r(T)]:"",p_type:"brown",p_headerTitle:r(ie),p_colpadding:"padding: 0px 7px 0px 0px",p_color:"black",p_variant:"tonal",p_textFieldLabel:r(k),p_required:" true ",p_action:"upd",onSave:e[1]||(e[1]=n=>M("upd",K.value)),p_autocomplete:r(E),p_acDefaultValue:p.value?p.value[oe.value]:"",p_acLabel:"Nemzetiség",p_acItems:r(Z),p_acKey:"NN_ID",p_acTitle:"NN_NATIONALITY",p_acValue:"NN_ID"},null,8,["p_visible","p_defvalue","p_headerTitle","p_textFieldLabel","p_autocomplete","p_acDefaultValue","p_acItems"])):h("",!0),p.value?(x(),y(S,{key:1,p_visible:B.value,"onUpdate:p_visible":e[2]||(e[2]=n=>B.value=n),ref_key:"myDeleteDialog",ref:Y,p_defvalue:p.value?p.value[r(T)]:"",p_type:"brown",p_headerTitle:r(J),p_colpadding:"padding: 0px 7px 0px 0px",p_color:"black",p_variant:"tonal",p_textFieldLabel:r(J),onClose:e[3]||(e[3]=n=>M("del",Y.value)),p_required:" true ",p_disabled:" true ",p_readonly:" true ",p_okBtnName:"Igen",p_cancelBtnName:"Nem"},null,8,["p_visible","p_defvalue","p_headerTitle","p_textFieldLabel"])):h("",!0),a(z,{rounded:"lg",style:{padding:"15px","background-color":"antiquewhite"}},{default:l(()=>[c.value?(x(),y(r(he),{key:0,style:{"background-color":"antiquewhite"},modelValue:u.selectedRow,"onUpdate:modelValue":e[8]||(e[8]=n=>u.selectedRow=n),density:"compact",headers:w.value,items:c.value,"item-value":r(T),"item-key":r(T),class:"elevation-1",search:L.value,hover:"true","multi-sort":"true","items-per-page-text":r(k)+" oldalanként","select-strategy":"page","no-data-text":"Nincs a keresésnek megfelelő "+r(k).toLowerCase()+"...",loading:V.value,"loading-text":"Betöltés... Kérem várjon","show-current-page":"true","page-text":"","onUpdate:page":e[9]||(e[9]=n=>de())},{top:l(()=>[a(z,{rounded:"lg",elevation:"6",color:"black",variant:"tonal",style:{margin:"10px 10px 10px 10px"}},{default:l(()=>[a(D,null,{default:l(()=>[a(_,{cols:"6"},{default:l(()=>[a(ve,{modelValue:L.value,"onUpdate:modelValue":e[4]||(e[4]=n=>L.value=n),label:"Keresés",class:"mx-auto",clearable:"","append-inner-icon":"fas fa-magnifying-glass",style:{padding:"10px 10px 0px 10px","margin-top":"10px"},rounded:"lg",elevation:"10"},null,8,["modelValue"])]),_:1}),a(_,{cols:"2"}),a(_,{cols:"3"},{default:l(()=>[a(S,{ref_key:"myNewDialog",ref:j,p_defvalue:"",p_btnName:r(H),p_type:"brown",p_prependicon:"fa fa-square-plus",p_headerTitle:r(H),p_colpadding:"padding: 30px 0px 0px 0px",p_color:"black",p_size:"default",p_rounded:"lg",p_elevation:"10",p_variant:"tonal",p_textFieldLabel:r(k),onSave:e[5]||(e[5]=n=>M("add",j.value)),p_required:" true ",p_tooltipText:"Új",p_tooltipLocation:"start",p_autocomplete:r(E),p_acDefaultValue:"",p_acLabel:"Nemzetiség",p_acItems:r(Z),p_acKey:"NN_ID",p_acTitle:"NN_NATIONALITY",p_acValue:"NN_ID"},null,8,["p_btnName","p_headerTitle","p_textFieldLabel","p_autocomplete","p_acItems"])]),_:1}),a(_,{cols:"1",style:{"padding-right":"20px"}},{default:l(()=>[a(q,{modelValue:u.exportXlsxBtn,"onUpdate:modelValue":e[6]||(e[6]=n=>u.exportXlsxBtn=n),icon:"",style:{margin:"30px 0px 0px 0px",height:"36px"},rounded:"lg",elevation:"10",variant:"tonal",onClick:e[7]||(e[7]=n=>pe())},{default:l(()=>[a(U,null,{default:l(()=>[R("mdi-export")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),"item.NN_COUNTRYCODE":l(({item:n})=>[ee("img",{src:`https://flagcdn.com/w40/${n.NN_COUNTRYCODE||"un"}.png`,alt:"zászló",title:n.NN_NATIONALITY||"Nincs megadva",style:{"vertical-align":"middle"}},null,8,Ce)]),"item.actions":l(({item:n})=>[a(D,{dense:"","no-gutters":"",align:"center"},{default:l(()=>[a(q,{icon:"",style:{"margin-right":"10px"},variant:"tonal",size:"x-small",color:"black",onClick:me=>P(n,"upd")},{default:l(()=>[a(U,null,{default:l(()=>[R("fa fa-pen-to-square")]),_:1}),a(W,{activator:"parent",text:"Módosítás",location:"left"})]),_:2},1032,["onClick"]),a(q,{icon:"",variant:"tonal",size:"x-small",color:"black",onClick:me=>P(n,"del")},{default:l(()=>[a(U,null,{default:l(()=>[R("fa fa-trash")]),_:1}),a(W,{activator:"parent",text:"Törlés",location:"right"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["modelValue","headers","items","item-value","item-key","search","items-per-page-text","no-data-text","loading"])):h("",!0)]),_:1})]),_:1}),a(_,{cols:"2"})]),_:1})):h("",!0),a(D,{align:"center",justify:"center"},{default:l(()=>[r(O)?h("",!0):(x(),y(z,{key:0,rounded:"lg",elevation:"16",color:"#e3d19f",width:"600",px:""},{default:l(()=>[Ve]),_:1}))]),_:1})]),_:1})}}};export{Me as default};
