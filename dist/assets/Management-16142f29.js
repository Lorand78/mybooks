import{u as fe,r as u,o as ge,y as R,v as ee,a as g,b as y,d as o,j as x,S as ye,k,m as a,l,q as S,z as te,A as xe,x as K,V as Ne,B as Te}from"./index-4066e87e.js";import{u as be,_ as Y}from"./useManagementUtils-3e8431ac.js";var n={},d,_;function $(){throw new Error("setTimeout has not been defined")}function F(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?d=setTimeout:d=$}catch{d=$}try{typeof clearTimeout=="function"?_=clearTimeout:_=F}catch{_=F}})();function ae(t){if(d===setTimeout)return setTimeout(t,0);if((d===$||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch{try{return d.call(null,t,0)}catch{return d.call(this,t,0)}}}function ke(t){if(_===clearTimeout)return clearTimeout(t);if((_===F||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(t);try{return _(t)}catch{try{return _.call(null,t)}catch{return _.call(this,t)}}}var m=[],h=!1,N,D=-1;function he(){!h||!N||(h=!1,N.length?m=N.concat(m):D=-1,m.length&&le())}function le(){if(!h){var t=ae(he);h=!0;for(var s=m.length;s;){for(N=m,m=[];++D<s;)N&&N[D].run();D=-1,s=m.length}N=null,h=!1,ke(t)}}n.nextTick=function(t){var s=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)s[p-1]=arguments[p];m.push(new oe(t,s)),m.length===1&&!h&&ae(le)};function oe(t,s){this.fun=t,this.array=s}oe.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=!0;n.env={};n.argv=[];n.version="";n.versions={};function f(){}n.on=f;n.addListener=f;n.once=f;n.off=f;n.removeListener=f;n.removeAllListeners=f;n.emit=f;n.prependListener=f;n.prependOnceListener=f;n.listeners=function(t){return[]};n.binding=function(t){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(t){throw new Error("process.chdir is not supported")};n.umask=function(){return 0};const we=["src","title"],Ie=te("h1",{style:{color:"red","font-weight":"bold","text-align":"center"}}," Nincs bejelentkezve! ",-1),Ce={__name:"Management",setup(t){console.log("Karbantartás!!!");const s=fe(),p=u(null),L=s.currentRoute.value.params.type;var V=L=="AT";const ne=u(!1),C=u("");u(null);const re=u(""),ie=u(""),E=u(null),j=u(null),X=u(null),c=u(null),A=u(!1),O=u(!1),Q=u(!1),G=u(null),H=u("green"),{titlevalue:T,keyvalue:b,keyID:De,newtitle:J,modifytitle:ue,deletetitle:P,resultData:B,setMetaByCat:se,setItem:pe}=be();ge(async()=>{if(console.log("onMounted, cat: ",s.currentRoute.value.params.type),R.value==!0){se(s.currentRoute.value.params.type);const i=await ee(L);i&&(p.value=i),console.log("data: ",p)}console.log("onMounted után")});const w=u([]);L==="AT"?w.value=[{title:T,key:b},{title:"Nemzetiség",key:"NN_COUNTRYCODE"},{title:"Műveletek",key:"actions",sortable:!1}]:w.value=[{title:T,key:b},{title:"Műveletek",key:"actions",sortable:!1}],console.log("head: ",w);async function ce(){const i=Te,e=i.utils.book_new(),v=i.utils.json_to_sheet(p.value);i.utils.book_append_sheet(e,v,ie.value),i.writeFile(e,re.value)}function de(){window.scrollTo(0,0)}function W(i,e){c.value=i,console.log("selectedItem: ",c.value),xe(()=>{e=="upd"?A.value=!0:O.value=!0})}async function M(i,e){await pe({action:i,myDialog:e,selectedItem:c,cat:s.currentRoute.value.params.type,fetchData:ee,snackbarState:{color:H,message:G,active:Q}}),console.log("resultData: ",B),B.value!=""&&(p.value=B.value)}return(i,e)=>{const v=g("v-col"),_e=g("v-text-field"),z=g("v-icon"),U=g("v-btn"),I=g("v-row"),q=g("v-card"),Z=g("v-tooltip"),ve=g("v-container");return x(),y(ve,{fluid:""},{default:o(()=>[Q.value?(x(),y(ye,{key:0,p_title:G.value,p_color:H.value},null,8,["p_title","p_color"])):k("",!0),a(R)?(x(),y(I,{key:1},{default:o(()=>[l(v,{cols:"2"}),l(v,{cols:"8"},{default:o(()=>[c.value?(x(),y(Y,{key:0,p_visible:A.value,"onUpdate:p_visible":e[0]||(e[0]=r=>A.value=r),ref_key:"myModifyDialog",ref:j,p_defvalue:c.value?c.value[a(b)]:"",p_type:"brown",p_headerTitle:a(ue),p_colpadding:"padding: 0px 7px 0px 0px",p_color:"black",p_variant:"tonal",p_textFieldLabel:a(T),p_required:" true ",p_action:"upd",onSave:e[1]||(e[1]=r=>M("upd",j.value)),p_autocomplete:a(V),p_acDefaultValue:c.value?c.value.NN_NATIONALITY:"",p_acLabel:"Nemzetiség",p_acItems:a(K),p_acKey:i.NN_ID,p_acTitle:"NN_NATIONALITY",p_acValue:"NN_ID"},null,8,["p_visible","p_defvalue","p_headerTitle","p_textFieldLabel","p_autocomplete","p_acDefaultValue","p_acItems","p_acKey"])):k("",!0),c.value?(x(),y(Y,{key:1,p_visible:O.value,"onUpdate:p_visible":e[2]||(e[2]=r=>O.value=r),ref_key:"myDeleteDialog",ref:X,p_defvalue:c.value?c.value[a(b)]:"",p_type:"brown",p_headerTitle:a(P),p_colpadding:"padding: 0px 7px 0px 0px",p_color:"black",p_variant:"tonal",p_textFieldLabel:a(P),onClose:e[3]||(e[3]=r=>M("del",X.value)),p_required:" true ",p_disabled:" true ",p_readonly:" true ",p_okBtnName:"Igen",p_cancelBtnName:"Nem",p_autocomplete:a(V),p_acDefaultValue:c.value?c.value.NN_NATIONALITY:"",p_acLabel:"Nemzetiség",p_acItems:a(K),p_acKey:i.NN_ID,p_acTitle:"NN_NATIONALITY",p_acValue:"NN_ID"},null,8,["p_visible","p_defvalue","p_headerTitle","p_textFieldLabel","p_autocomplete","p_acDefaultValue","p_acItems","p_acKey"])):k("",!0),l(q,{rounded:"lg",style:{padding:"15px","background-color":"antiquewhite"}},{default:o(()=>[p.value?(x(),y(a(Ne),{key:0,style:{"background-color":"antiquewhite"},modelValue:i.selectedRow,"onUpdate:modelValue":e[8]||(e[8]=r=>i.selectedRow=r),density:"compact",headers:w.value,items:p.value,"item-value":a(b),"item-key":a(b),class:"elevation-1",search:C.value,hover:"true","multi-sort":"true","items-per-page-text":a(T)+" oldalanként","select-strategy":"page","no-data-text":"Nincs a keresésnek megfelelő "+a(T).toLowerCase()+"...",loading:ne.value,"loading-text":"Betöltés... Kérem várjon","show-current-page":"true","page-text":"","onUpdate:page":e[9]||(e[9]=r=>de())},{top:o(()=>[l(q,{rounded:"lg",elevation:"6",color:"black",variant:"tonal",style:{margin:"10px 10px 10px 10px"}},{default:o(()=>[l(I,null,{default:o(()=>[l(v,{cols:"6"},{default:o(()=>[l(_e,{modelValue:C.value,"onUpdate:modelValue":e[4]||(e[4]=r=>C.value=r),label:"Keresés",class:"mx-auto",clearable:"","append-inner-icon":"fas fa-magnifying-glass",style:{padding:"10px 10px 0px 10px","margin-top":"10px"},rounded:"lg",elevation:"10"},null,8,["modelValue"])]),_:1}),l(v,{cols:"2"}),l(v,{cols:"3"},{default:o(()=>[l(Y,{ref_key:"myNewDialog",ref:E,p_defvalue:"",p_btnName:a(J),p_type:"brown",p_prependicon:"fa fa-square-plus",p_headerTitle:a(J),p_colpadding:"padding: 30px 0px 0px 0px",p_color:"black",p_size:"default",p_rounded:"lg",p_elevation:"10",p_variant:"tonal",p_textFieldLabel:a(T),onSave:e[5]||(e[5]=r=>M("add",E.value)),p_required:" true ",p_tooltipText:"Új",p_tooltipLocation:"start",p_autocomplete:a(V),p_acDefaultValue:"",p_acLabel:"Nemzetiség",p_acItems:a(K),p_acKey:i.NN_ID,p_acTitle:"NN_NATIONALITY",p_acValue:"NN_ID"},null,8,["p_btnName","p_headerTitle","p_textFieldLabel","p_autocomplete","p_acItems","p_acKey"])]),_:1}),l(v,{cols:"1",style:{"padding-right":"20px"}},{default:o(()=>[l(U,{modelValue:i.exportXlsxBtn,"onUpdate:modelValue":e[6]||(e[6]=r=>i.exportXlsxBtn=r),icon:"",style:{margin:"30px 0px 0px 0px",height:"36px"},rounded:"lg",elevation:"10",variant:"tonal",onClick:e[7]||(e[7]=r=>ce())},{default:o(()=>[l(z,null,{default:o(()=>[S("mdi-export")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),"item.NN_COUNTRYCODE":o(({item:r})=>[te("img",{src:`https://flagcdn.com/w40/${r.NN_COUNTRYCODE||"un"}.png`,alt:"zászló",title:r.NN_NATIONALITY||"Nincs megadva",style:{"vertical-align":"middle"}},null,8,we)]),"item.actions":o(({item:r})=>[l(I,{dense:"","no-gutters":"",align:"center"},{default:o(()=>[l(U,{icon:"",style:{"margin-right":"10px"},variant:"tonal",size:"x-small",color:"black",onClick:me=>W(r,"upd")},{default:o(()=>[l(z,null,{default:o(()=>[S("fa fa-pen-to-square")]),_:1}),l(Z,{activator:"parent",text:"Módosítás",location:"left"})]),_:2},1032,["onClick"]),l(U,{icon:"",variant:"tonal",size:"x-small",color:"black",onClick:me=>W(r,"del")},{default:o(()=>[l(z,null,{default:o(()=>[S("fa fa-trash")]),_:1}),l(Z,{activator:"parent",text:"Törlés",location:"right"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["modelValue","headers","items","item-value","item-key","search","items-per-page-text","no-data-text","loading"])):k("",!0)]),_:1})]),_:1}),l(v,{cols:"2"})]),_:1})):k("",!0),l(I,{align:"center",justify:"center"},{default:o(()=>[a(R)?k("",!0):(x(),y(q,{key:0,rounded:"lg",elevation:"16",color:"#e3d19f",width:"600",px:""},{default:o(()=>[Ie]),_:1}))]),_:1})]),_:1})}}};export{Ce as default};
